(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{2238:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});let r=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],i=["project","search","ports","settings"],o=["light","dark"],s=["editor","preview"],l={clickToLoad:e=>c("ctl",e),devToolsHeight:e=>d("devtoolsheight",e),forceEmbedLayout:e=>c("embed",e),hideDevTools:e=>c("hidedevtools",e),hideExplorer:e=>c("hideExplorer",e),hideNavigation:e=>c("hideNavigation",e),openFile:e=>p("file",e),showSidebar:e=>"boolean"==typeof e?`showSidebar=${e?"1":"0"}`:"",sidebarView:e=>u("sidebarView",e,i),startScript:e=>p("startScript",e),terminalHeight:e=>d("terminalHeight",e),theme:e=>u("theme",e,o),view:e=>u("view",e,s),zenMode:e=>c("zenMode",e)};function a(e={}){let t=Object.entries(e).map(([e,t])=>null!=t&&l.hasOwnProperty(e)?l[e](t):"").filter(Boolean);return t.length?`?${t.join("&")}`:""}function c(e,t){return!0===t?`${e}=1`:""}function d(e,t){return"number"!=typeof t||Number.isNaN(t)?"":`${e}=${encodeURIComponent(Math.round(Math.min(100,Math.max(0,t))))}`}function u(e,t="",n=[]){return n.includes(t)?`${e}=${encodeURIComponent(t)}`:""}function p(e,t){let n=Array.isArray(t)?t:[t];return n.filter(e=>"string"==typeof e&&""!==e.trim()).map(t=>`${e}=${encodeURIComponent(t)}`).join("&")}function h(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function f(e,t){return`${y(t)}${e}${a(t)}`}function m(e,t){let n={forceEmbedLayout:!0};return t&&"object"==typeof t&&Object.assign(n,t),`${y(n)}${e}${a(n)}`}function y(e={}){let t="string"==typeof e.origin?e.origin:"https://stackblitz.com";return t.replace(/\/$/,"")}function _(e,t,n){if(!t||!e||!e.parentNode)throw Error("Invalid Element");e.id&&(t.id=e.id),e.className&&(t.className=e.className),function(e,t={}){let n=Object.hasOwnProperty.call(t,"height")?`${t.height}`:"300",r=Object.hasOwnProperty.call(t,"width")?`${t.width}`:void 0;e.setAttribute("height",n),r?e.setAttribute("width",r):e.setAttribute("style","width:100%;")}(t,n),e.replaceWith(t)}function g(e){if("string"==typeof e){let t=document.getElementById(e);if(!t)throw Error(`Could not find element with id '${e}'`);return t}if(e instanceof HTMLElement)return e;throw Error(`Invalid element: ${e}`)}function w(e){return e&&!1===e.newWindow?"_self":"_blank"}class b{constructor(e){this.pending={},this.port=e,this.port.onmessage=this.messageListener.bind(this)}request({type:e,payload:t}){return new Promise((n,r)=>{let i=h();this.pending[i]={resolve:n,reject:r},this.port.postMessage({type:e,payload:{...t,__reqid:i}})})}messageListener(e){if("string"!=typeof e.data.payload?.__reqid)return;let{type:t,payload:n}=e.data,{__reqid:r,__success:i,__error:o}=n;this.pending[r]&&(i?this.pending[r].resolve(this.cleanResult(n)):this.pending[r].reject(o?`${t}: ${o}`:t),delete this.pending[r])}cleanResult(e){let t={...e};return delete t.__reqid,delete t.__success,delete t.__error,Object.keys(t).length?t:null}}class E{constructor(e,t){this.editor={openFile:e=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:e}}),setCurrentFile:e=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:e}}),setTheme:e=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:e}}),setView:e=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:e}}),showSidebar:(e=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:e}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(e=>e?.url??null),setUrl:(e="/")=>{if("string"!=typeof e||!e.startsWith("/"))throw Error(`Invalid argument: expected a path starting with '/', got '${e}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:e}})}},this._rdc=new b(e),Object.defineProperty(this.preview,"origin",{value:"string"==typeof t.previewOrigin?t.previewOrigin:null,writable:!1})}applyFsDiff(e){var t;if(null!==e&&"object"==typeof e&&null!==(t=e.create)&&"object"==typeof t){if(!Array.isArray(e.destroy))throw Error("Invalid diff object: expected diff.destroy to be an array.")}else throw Error("Invalid diff object: expected diff.create to be an object.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:e})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}}let j=[];class v{constructor(e){this.id=h(),this.element=e,this.pending=new Promise((e,t)=>{let n=({data:t,ports:n})=>{t?.action==="SDK_INIT_SUCCESS"&&t.id===this.id&&(this.vm=new E(n[0],t.payload),e(this.vm),i())},r=()=>{this.element.contentWindow?.postMessage({action:"SDK_INIT",id:this.id},"*")};function i(){window.clearInterval(s),window.removeEventListener("message",n)}window.addEventListener("message",n),r();let o=0,s=window.setInterval(()=>{if(this.vm){i();return}if(o>=20){i(),t("Timeout: Unable to establish a connection with the StackBlitz VM"),j.forEach((e,t)=>{e.id===this.id&&j.splice(t,1)});return}o++,r()},500)}),j.push(this)}}let S=e=>{let t=e instanceof Element?"element":"id";return j.find(n=>n[t]===e)??null};function $({template:e,title:t,description:n,dependencies:i,files:o,settings:s}){if(!r.includes(e)){let e=r.map(e=>`'${e}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${e}`)}let l=[],a=(e,t,n="")=>{l.push(function(e,t){let n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,n}(e,"string"==typeof t?t:n))};a("project[title]",t),"string"==typeof n&&n.length>0&&a("project[description]",n),a("project[template]",e,"javascript"),i&&("node"===e?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):a("project[dependencies]",JSON.stringify(i))),s&&a("project[settings]",JSON.stringify(s)),Object.entries(o).forEach(([e,t])=>{a(`project[files][${e.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}]`,t)});let c=document.createElement("form");return c.method="POST",c.setAttribute("style","display:none!important;"),c.append(...l),c}function I(e){if(!e?.contentWindow)return Promise.reject("Provided element is not an iframe.");let t=S(e)??new v(e);return t.pending}let O={connect:I,embedGithubProject:function(e,t,n){let r=g(e),i=document.createElement("iframe");return i.src=m(`/github/${t}`,n),_(r,i,n),I(i)},embedProject:function(e,t,n){let r=g(e),i=function(e,t){let n=$(e);n.action=m("/run",t),n.id="sb_run";let r=`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${n.outerHTML}
  <script>document.getElementById('${n.id}').submit();</script>
</body>
</html>`;return r}(t,n),o=document.createElement("iframe");return _(r,o,n),o.contentDocument?.write(i),I(o)},embedProjectId:function(e,t,n){let r=g(e),i=document.createElement("iframe");return i.src=m(`/edit/${t}`,n),_(r,i,n),I(i)},openGithubProject:function(e,t){let n=f(`/github/${e}`,t),r=w(t);window.open(n,r)},openProject:function(e,t){!function(e,t){let n=$(e);n.action=f("/run",t),n.target=w(t),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}(e,t)},openProjectId:function(e,t){let n=f(`/edit/${e}`,t),r=w(t);window.open(n,r)}}},2594:function(e,t,n){Promise.resolve().then(n.bind(n,5136))},5136:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(7437),i=n(2265),o=n(2238);function s(){let[e,t]=(0,i.useState)(""),[n,s]=(0,i.useState)(!1),[l,a]=(0,i.useState)({}),c=(0,i.useRef)(null),[d,u]=(0,i.useState)(500);(0,i.useEffect)(()=>{n||(p(),s(!0))},[n]),(0,i.useEffect)(()=>{n||(p(),s(!0))},[n]);let p=async()=>{let e={title:"My New Project",description:"A sample project with custom files and dependencies.",template:"javascript",dependencies:{lodash:"^4.17.21"},files:{"index.html":"<h1>Hello Custom Project!</h1>","index.js":'import _ from "lodash";'}},t=document.getElementById("stackblitz-iframe"),n=await o.Z.embedProject(t,e);a(e.files),h(n)},h=async e=>{let t=async()=>{let t={"index.html":"".concat(l),"index.js":'console.log("Updated content");'},n=[];for(let e in l)t[e]||n.push(e);await e.applyFsDiff({create:t,destroy:n})};setTimeout(t,5e3)},f=async()=>{let e=document.getElementById("stackblitz-iframe"),t=await o.Z.connect(e);console.log(l),await t.applyFsDiff({create:l,destroy:[]})};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{onClick:()=>{let e={...l,"index.html":"<h1>HELLO WORLD</h1>"};t(JSON.stringify(e,null,2)),a(e)},children:"Compare Objects"}),(0,r.jsx)("button",{onClick:f,children:"Apply Changes to Editor"})]}),(0,r.jsx)("div",{children:(0,r.jsx)("pre",{children:e})}),(0,r.jsx)("div",{className:"h-full",children:(0,r.jsx)("iframe",{ref:c,id:"stackblitz-iframe",title:"StackBlitz Editor",width:"100%"})})]})}},622:function(e,t,n){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2265),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,r)&&!a.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:d,props:o,_owner:l.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},7437:function(e,t,n){"use strict";e.exports=n(622)}},function(e){e.O(0,[971,596,744],function(){return e(e.s=2594)}),_N_E=e.O()}]);