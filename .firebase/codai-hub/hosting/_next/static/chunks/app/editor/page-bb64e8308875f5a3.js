(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{1729:function(e,t,a){Promise.resolve().then(a.bind(a,4447))},4447:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return X}});var s=a(7437),l=a(2265),i=a(9150),n=a(5391),r=a(5932),o=a(7712),c=a(2979),d=a(3560),u=a(8676),h=a(7623),x=a(8256),f=a(3409),m=a(423),p=a(3865),j=a(6998);function v(e){let{active:t}=e,{user:a,handleLogout:l}=(0,j.Eu)();return(0,s.jsxs)("header",{className:"px-2 flex flex-row items-center ".concat(t?"flex-row gap-7":"flex-col items-center justify-center"),children:[(0,s.jsx)("div",{className:"".concat(""),children:t?(0,s.jsx)(u.h,{showFallback:!0,isBordered:!0,src:null==a?void 0:a.photoURL}):(0,s.jsx)(g,{color:"default",variant:"light",active:t,children:(0,s.jsx)(u.h,{showFallback:!0,isBordered:!0,src:null==a?void 0:a.photoURL})})}),(0,s.jsxs)("div",{className:"flex flex-row gap-3 items-center justify-center",children:[(0,s.jsx)("span",{className:"text-white overflow-hidden overflow-ellipsis whitespace-nowrap max-w-[160px] ".concat(t?"":"hidden"),children:null==a?void 0:a.displayName}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4",children:(0,s.jsx)(g,{handleLogout:l,color:"default",variant:"light",active:t,children:(0,s.jsx)(h.A,{className:t?"":"hidden",isIconOnly:!0,variant:"outline",children:(0,s.jsx)(d.qhg,{size:20})})})})]})]})}let g=e=>{let{variant:t,color:a,children:l,handleLogout:i}=e;return(0,s.jsxs)(x.F,{children:[(0,s.jsx)(f.S,{className:"cursor-pointer",children:l}),(0,s.jsxs)(m.a,{"aria-label":"Dropdown Variants",color:a,variant:t,children:[(0,s.jsx)(p.M,{children:"Ver informa\xe7\xf5es"},"edit"),(0,s.jsx)(p.M,{onClick:i,className:"text-danger",color:"danger",children:"Sair"},"delete")]})]})};var y=a(9571),w=a(831);let b="https://southamerica-east1-codai-production.cloudfunctions.net/codai";async function N(e){if(e){let t=await e.getIdToken();return t}return null}async function S(e){let{ask:t,template:a,chatId:s,userId:l,user:i}=e,n=await N(i);if(!n)return null;let r=await fetch("".concat(b,"/code/code-openai"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({ask:t,template:a,chatId:s,userId:l})});return r.json()}async function E(e,t){let a=await N(t);if(console.log(a),!a)return null;let s=await fetch("".concat(b,"/chats/user/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}});return s.json()}async function k(e,t){let a=await N(t);if(!a)return null;let s=await fetch("".concat(b,"/chats/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}});return s.json()}async function C(e){try{let t=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({messages:[{role:"system",content:"Crie um titulo para um chat (deve retornar apenas o titulo) de at\xe9 20 caractere descrito o tema pedido pelo usuario SEMPRE GERE um titulo independente do que ele mandar n\xe3o pode conter ASPAS"},{role:"user",content:e}],model:"gpt-3.5-turbo",temperature:0})});if(!t.ok)throw Error("HTTP error! Status: ".concat(t.status));let a=await t.json();return a}catch(e){throw console.error("Error:",e),e}}async function I(e,t,a,s){let l=await N(s);if(!l)return null;console.log("authToken",l);let i=await fetch("".concat(b,"/chats/title/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({title:t,userId:a})});return i.json()}async function A(e){let t=await N(e);if(!t)return null;let a=await fetch("".concat(b,"/framework"),{headers:{Authorization:"Bearer ".concat(t)}});return a.json()}let O=(0,l.createContext)();function z(e){let{children:t}=e,{user:a}=(0,j.Eu)(),[i,n]=(0,l.useState)(null),[r,o]=(0,l.useState)([]),[c,d]=(0,l.useState)(!0),[u,h]=(0,l.useState)([]);async function x(){try{let e=a.uid,t=await E(e,a),s=t.data.sort((e,t)=>t.lastModified-e.lastModified);o(s),d(!1),n(s[0])}catch(e){console.error("Error fetching chats:",e)}}async function f(e){try{let t=await f(e,a);console.log(t)}catch(e){console.error("Error fetching chats:",e)}}return(0,l.useEffect)(()=>{(async function(){try{let e=a.uid,t=await E(e,a),s=t.data.sort((e,t)=>t.lastModified-e.lastModified);o(s),d(!1)}catch(e){console.error("Error fetching chats:",e)}})()},[]),(0,s.jsx)(O.Provider,{value:{selectedChat:i,setSelectedChat:n,chats:r,setChats:o,fetchChats:x,contentEditor:u,setContentEditor:h,getChatById:f},children:t})}function B(){return(0,l.useContext)(O)}function P(){let{selectedChat:e,setSelectedChat:t,chats:a,setChats:d}=B(),[u,x]=(0,l.useState)(!1),f=(0,o._)(),m=(0,o._)(),p=(0,o._)(),j=e=>{t(e)},g=()=>{f.start({width:"250px",transition:{duration:.001}}),m.start({opacity:1,display:"block",transition:{delay:.3}}),p.start({opacity:1,transition:{delay:.3}}),x(!0)};return(0,l.useEffect)(()=>{g()},[]),(0,s.jsx)("div",{className:" flex-grow-0 teste",children:(0,s.jsx)("div",{className:"",children:(0,s.jsx)(c.E.div,{animate:f,className:"max-w-[250px] p-2 h-screen animate duration-300 relative flex flex-col group ".concat(u?"":"w-16 mx-auto text-center"),children:(0,s.jsxs)("div",{className:"bg-blackcodai-950 py-6 h-full rounded-3xl overflow-hidden",children:[(0,s.jsx)("div",{className:"px-5 flex flex-wrap teste flex-row gap-5 items-center ".concat(u?"":"justify-center"),children:(0,s.jsx)(v,{active:u})}),(0,s.jsx)(y.j,{className:"mt-6 mb-2"}),(0,s.jsx)("div",{className:"flex bg-transparent px-4 py-1 justify-center cursor-pointer",children:(0,s.jsx)(w.e,{placement:"right-end",content:"Gerar novo template",children:(0,s.jsx)(h.A,{onClick:()=>{var s,l;e&&(null==e?void 0:e.title)!==""&&0!=a.length&&""==!(null===(s=a[0])||void 0===s?void 0:s.title)&&t(null),(null===(l=a[0])||void 0===l?void 0:l.title)==""&&t(null)},className:"w-full ".concat(u?"justify-start":""," "),isIconOnly:!u,variant:"light",color:"default",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(n.nmH,{className:"text-lg ".concat(u?"text-xl":""," text-gray-500")}),(0,s.jsx)(c.E.p,{animate:m,className:"ml-4 text-sm font-bold text-gray-400",children:"Gerar novo template"})]})})})}),(0,s.jsxs)("div",{className:"grow items-center overflow-y-auto",style:{maxHeight:u?"calc(82vh - 100px)":"calc(74vh - 48px)"},children:[a.map((e,t)=>(0,s.jsx)("div",{className:"flex px-4 py-1 justify-center cursor-pointer",children:(0,s.jsx)(w.e,{placement:"right-end",content:e.title||"Novo template",children:(0,s.jsxs)(h.A,{onClick:()=>j(e),className:"w-full ".concat(u?"justify-start":""," "),isIconOnly:!u,variant:"light",color:"default",children:[(0,s.jsx)(i.Zs0,{className:"text-lg text-sulu-300"}),(0,s.jsxs)(c.E.p,{animate:m,className:"ml-4 text-sm font-bold text-gray-300 overflow-hidden overflow-ellipsis whitespace-nowrap max-w-[160px]",children:[e.title||"Novo template"," "]})]})})},t))," "]}),(0,s.jsxs)("div",{className:"absolute bottom-5 left-0 right-0 p-4 flex justify-center items-center",children:[u?(0,s.jsx)(r.X_U,{onClick:()=>{f.start({width:"80px",transition:{duration:.001}}),m.start({opacity:0,display:"none"}),p.start({opacity:0}),x(!1)},className:"text-2xl text-gray-400 cursor-pointer"}):(0,s.jsx)(r.UDe,{onClick:g,className:"text-2xl text-gray-400 cursor-pointer"})," "]})]})})})})}a(1396);var T=a(8920),M=a(4606),_=a(2167),H=e=>{let{sidebarOpen:t}=e,{selectedChat:a}=B(),[i,n]=(0,l.useState)(!1),r=(0,o._)(),d=(0,o._)();return(0,l.useEffect)(()=>{r.start((null==a?void 0:a.title)?"visible":"hidden"),d.start((null==a?void 0:a.title)?"visible":"hidden")},[a]),(0,s.jsx)(c.E.div,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.3},className:"bg-blackcodai-950 my-3 mx-1 py-6 px-4  rounded-3xl ".concat(t?"ml-1/4":"ml-1/5"," transition-all duration-300"),children:(0,s.jsxs)("div",{className:"flex flex-row items-center w-full justify-between",children:[(0,s.jsx)(c.E.h1,{initial:{opacity:0,y:-20},animate:"visible",exit:"hidden",variants:{hidden:{opacity:0,y:-20},visible:{opacity:1,y:0}},className:"text-white h-[40px] text-lg",children:a&&(""!==a.title?a.title:"Novo template")||"Novo template"},null==a?void 0:a.title),(0,s.jsx)(_.M,{children:(null==a?void 0:a.title)&&(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:"visible",exit:"hidden",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{duration:.3},className:"flex flex-row gap-5",children:[(0,s.jsx)(h.A,{variant:"light",className:"text-gray-400",isLoading:i,startContent:i?"":(0,s.jsx)(T._hL,{}),children:"Download (ZIP)"}),(0,s.jsx)(h.A,{variant:"light",className:"text-gray-400",isLoading:i,startContent:i?"":(0,s.jsx)(T.PMT,{}),children:"Compartilhar"}),(0,s.jsx)(h.A,{variant:"solid",className:"text-gray-400",isLoading:i,isIconOnly:!0,children:(0,s.jsx)(M.mz0,{size:30})})]},"buttons")})]})})},D=a(4033),F=a(2238);function L(e){let{loading:t,setLoading:a}=e,{user:i}=(0,j.Eu)(),{selectedChat:n,contentEditor:r}=B(),[o,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)({}),[h,x]=(0,l.useState)(""),[f,m]=(0,l.useState)(),p=(0,l.useRef)(null);(0,l.useEffect)(()=>{n&&n.id&&n.id!==h&&(a(!0),x(n.id),v())},[n,h]),(0,l.useEffect)(()=>{var e;console.log("contentEditor",r),o&&(null===(e=r.history)||void 0===e?void 0:e.slice(-1))&&(console.log("cai aqui?",r),g())},[r,o]);let v=async()=>{let e=await k(n.id,i),t=JSON.parse(e.data.history.slice(-1)[0].content);console.log(e.data.history.slice(-1)[0].content);let s=document.getElementById("stackblitz-iframe"),l=await F.Z.embedProject(s,t);m(l),a(!1),u(t),c(!0),await l.editor.setTheme("dark")},g=async()=>{let e=document.getElementById("stackblitz-iframe"),t=await F.Z.connect(e);console.log("vm",t);let a=y(JSON.parse(r.history[r.history.length-1].content).files,d.files);await t.applyFsDiff({create:a.create,destroy:[]})},y=(e,t)=>{let a={create:{},destroy:[]};for(let s in console.log("newFiles",e),console.log("existingFiles",t),e)t[s]&&t[s]===e[s]||(a.create[s]=e[s]);for(let s in t)e[s]||a.destroy.push(s);return a};return(0,s.jsx)("div",{className:"responsive-iframe",children:(0,s.jsx)("iframe",{className:"responsive-iframe",ref:p,id:"stackblitz-iframe",title:"CodAI Editor"})})}var R=a(3159),Z=a(5686);function J(){let[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=setInterval(()=>{t(e=>!e)},3e3);return()=>{clearInterval(e)}},[]),(0,l.useEffect)(()=>{if(e){let e=setInterval(()=>{t(!1)},500);return()=>{clearInterval(e)}}},[e]),(0,s.jsxs)("div",{className:"flex flex-col items-center h-full justify-center content-center",children:[(0,s.jsxs)("header",{className:"mb-12 text-center",children:[(0,s.jsx)("h1",{className:"text-2xl mb-3 font-semibold",children:"Ainda n\xe3o sabe como usar?"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Use as ideias b\xe1sicas de templates para ver funcionando"})]}),(0,s.jsx)("article",{children:(0,s.jsx)("div",{className:"glow",children:(0,s.jsx)("div",{className:"bg-gradient-to-tl orb  from-gray-700 to-gray-900 rounded-full content-center justify-center flex items-center",children:(0,s.jsx)(c.E.div,{initial:{scale:0},animate:{rotate:e?[-22,0,-10]:10,rotate:e?[-22,0,8]:2,scale:1,opacity:e?1:.7},transition:{type:"spring",stiffness:260,damping:20},children:(0,s.jsx)(R.UZO,{className:"text-yellow-300",size:25})})})})}),(0,s.jsx)("div",{className:"mt-6 text-lg",children:(0,s.jsx)("span",{children:"Ideias de templates"})}),(0,s.jsx)("div",{className:"mt-6 ",children:[{title:"E-commerce b\xe1sico de roupas em ReactJS",objet:""},{title:"Site de farm\xe1cia",objet:""}].map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-row py-2 px-4 bg-gradient-to-l from-blackcodai-950 to-gray-800 hover:bg-slate-100 hover:scale-[1.02] hover:shadow-md transform transition-transform duration-300 gap-20 rounded-lg my-4 items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)("h1",{children:e.title})}),(0,s.jsx)("div",{children:(0,s.jsx)(h.A,{variant:"light",startContent:(0,s.jsx)(Z.e$1,{className:"font-bold text-blue-400"}),isIconOnly:!0})})]},t))})]})}var V=a(1697),U=function(e){let{options:t,onSelectChange:a,isValid:i}=e,[n,r]=(0,l.useState)(""),[o,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{c(!i),i||d||(u(!0),setTimeout(()=>{u(!1)},3e3))},[i]),(0,s.jsx)("label",{className:"custom-select ".concat(o&&d?"animate-bounce":""),children:(0,s.jsxs)("select",{value:n,onChange:e=>{let t=e.target.value;"Selecione o framework"===t?r(""):(r(t),a(t))},children:[(0,s.jsx)("option",{value:null,children:"Selecione o framework"}),t.map((e,t)=>(0,s.jsx)("option",{value:e.template,children:e.title},t))]})})},q=a(2537),G=a(5474),W=()=>{let{user:e}=(0,j.Eu)(),{selectedChat:t,fetchChats:a,setContentEditor:i,setSelectedChat:n}=B(),[r,o]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!1),u=(0,l.useRef)(null),[x,f]=(0,l.useState)(""),[m,p]=(0,l.useState)(!1),[v,g]=(0,l.useState)(!1),[y,w]=(0,l.useState)([]);(0,l.useEffect)(()=>{!async function(){try{let t=await A(e);t&&w(t.data)}catch(e){console.error("Error fetching framework options:",e)}}()},[]);let b=async(s,l)=>{console.log("selected",t),g(!0);let n={ask:s,template:l,chatId:(null==t?void 0:t.id)||null,userId:e.uid,user:e};try{let e=await S(n);e&&(i(e.data.chat),e.data.chat.title||(await N(n.ask,n.userId,e.data.chat.id),await a()))}catch(e){console.error("Error fetching framework options:",e)}finally{g(!1)}},N=async(t,a,s)=>{try{let l=await C(t),i=await I(s,l.choices[0].message.content,a,e);return i}catch(e){console.error(e)}};(0,l.useEffect)(()=>{let e=u.current;e.style.height="auto";let t=Math.min(e.scrollHeight,96);e.style.height="".concat(t,"px"),d(e.value.trim().length>0)},[r,c]);let E=e=>{f(e)};return(0,s.jsx)(q.J9,{initialValues:{message:"",selectValue:""},onSubmit:(e,t)=>{let{resetForm:a}=t;""==x||""===e.message.trim()?(p(!0),(0,G.Z)("Selecione o framework desejado","error")):(p(!1),b(e.message,x),d(!1),a())},children:(0,s.jsx)(q.l0,{children:(0,s.jsx)("div",{className:"relative  transition-colors duration-300 ",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-6 p-2 px-4",children:[(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)(q.gN,{name:"selectValue",className:"".concat(m?"":"bg-red-600"),children:e=>{let{field:t}=e;return(0,s.jsx)(U,{options:y,onSelectChange:E,isValid:!m,...t})}})}),(0,s.jsx)("div",{className:"relative flex h-full flex-1 items-stretch md:flex-col",children:(0,s.jsx)("div",{className:"flex flex-col ".concat(r?" bg-blackcodai-900":""," transition-colors hover:bg-blackcodai-900 bg w-full py-[10px] flex-grow md:py-4 md:pl-4 relative border  dark:border-gray-900/50 bg-blackcodai-950 rounded-xl shadow-xs dark:shadow-xs"),children:(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)(q.gN,{as:"textarea",id:"message",name:"message",rows:"1",placeholder:"Descreva com precis\xe3o o que precisa",className:"m-0 w-full resize-none border-0 bg-transparent p-0 pr-10  pl-3 md:pl-0 outline-none ",style:{maxHeight:"200px",height:"auto",overflowY:"hidden"},onFocus:()=>o(!0),onBlur:()=>o(!1),innerRef:u,onInput:()=>{let e=u.current;e.style.height="auto";let t=Math.min(e.scrollHeight,96);e.style.height="".concat(t,"px"),d(e.value.trim().length>0)}})})})}),(0,s.jsx)(h.A,{className:" disabled:opacity-40 hover:bg-gray-600 h-14 w-14 ",isIconOnly:!0,isDisabled:!c,isLoading:v,type:"submit",children:v?"":(0,s.jsx)(V.fWS,{})})]})})})})};function K(){let{selectedChat:e}=B(),t=(0,l.useRef)(null),[a,i]=(0,l.useState)(!!e),[n,r]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{i(!!e)},[e]),(0,s.jsxs)("div",{className:"mx-2 h-full overflow-hidden relative flex flex-col",children:[(0,s.jsxs)("div",{ref:t,className:"flex-grow",children:[a?(0,s.jsxs)("div",{className:"h-full",children:[n?(0,s.jsx)("div",{className:"z-10 absolute w-full h-full flex flex-col justify-center items-center bg-black opacity-90 backdrop-blur-lg",children:(0,s.jsx)("h1",{children:"Carregando os dados"})}):null,(0,s.jsx)(L,{selectedChat:e,parentRef:t,setLoading:r,loading:n})]}):(0,s.jsx)("div",{className:"h-full",children:(0,s.jsx)(J,{})})," "]}),(0,s.jsx)("div",{className:"z-12",children:(0,s.jsx)(W,{})})]})}var Q=function(e){let{children:t}=e,{user:a}=(0,j.Eu)(),s=(0,D.useRouter)();return l.useEffect(()=>{null==a&&s.push("/login")},[a]),t},X=()=>{let[e,t]=(0,l.useState)(!0);return(0,s.jsx)(j.HD,{children:(0,s.jsx)(Q,{children:(0,s.jsx)(z,{children:(0,s.jsxs)("div",{className:"flex max-h-screen overflow-hidden",children:[(0,s.jsx)(P,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col ",children:[(0,s.jsx)(H,{sidebarOpen:e}),(0,s.jsx)(K,{sidebarOpen:e})]})]})})})})}},5474:function(e,t,a){"use strict";var s=a(7415);a(6518),t.Z=(e,t)=>{(0,s.Am)(e,{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,pauseOnFocusLoss:!1,draggable:!1,progress:void 0,type:t,theme:"dark"})}},6998:function(e,t,a){"use strict";a.d(t,{HD:function(){return u},Eu:function(){return d}});var s=a(7437),l=a(2265),i=a(3085),n=a(2827);function r(){return(0,s.jsxs)("div",{className:"flex flex-col gap-6 items-center justify-center h-screen",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-20 w-20 border-t-4 border-b-4 border-sulu-400"}),(0,s.jsx)("h1",{className:"text-sulu-400",children:"Aguarde"})]})}let o=(0,i.v0)(n.Z),c=(0,l.createContext)({}),d=()=>l.useContext(c),u=e=>{let{children:t}=e,[a,n]=(0,l.useState)(null),[d,u]=(0,l.useState)(!0);l.useEffect(()=>{let e=(0,i.Aj)(o,e=>{e?n(e):n(null),u(!1)});return()=>e()},[]);let h=async()=>{try{await (0,i.w7)(o)}catch(e){console.error("Error logging out:",e)}};return(0,s.jsx)(c.Provider,{value:{user:a,handleLogout:h},children:d?(0,s.jsx)(r,{}):t})}},2827:function(e,t,a){"use strict";var s=a(994);let l=0===(0,s.C6)().length?(0,s.ZF)({apiKey:"AIzaSyD0M7EUvBsk3HSQ9iFePss1Tbc5o1bjbEE",authDomain:"codai-production.firebaseapp.com",projectId:"codai-production",storageBucket:"codai-production.appspot.com",messagingSenderId:"937923944972",appId:"1:937923944972:web:68b8d5f678112c2aff4429",measurementId:"G-M115V5N9DS"}):(0,s.C6)()[0];t.Z=l}},function(e){e.O(0,[51,520,465,929,33,682,420,447,712,280,582,220,769,391,841,927,635,971,596,744],function(){return e(e.s=1729)}),_N_E=e.O()}]);